<!doctype html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">   
    <title>Edit</title>
    <link rel="stylesheet" href="/resource/css/style.css">
    <link rel="stylesheet" href="/resource/font-awesome/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    
        <script src="https://cdn.tiny.cloud/1/prasg836ln21zk19lppxm4nev2715rx7slc4p4txjt095uxd/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
        <script>
          tinymce.init({
            selector: '#content'
            });
        </script>
  </head>
  <body>

    <% if(login){ %>

      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
           <div class="row container-fluid card-header">
                <div class="col-5 text-dark ">
                    <strong> Bienvenido :</strong> <%= name%></p>
                </div> 
               <div class="col-7 text-dark " >
                <h1> <small>Sistema de gestion de Tickets</small></h1>
               </div>
           </div>                                  
      </nav>

<% if(user) { %>


<div class="container mt-4">    
   <div class="card border-secondary">
       <div class="card-header">Editar Registro</div>
            <div class="card-body">
                <form action="/actualizar" method="POST">
                    <input value="<%= user.TiId%>" name="TiId" id="TiId" hidden>
                <div class="mb-3">
                        <label for="TiTipo" class="form-label"> Tipo de proyecto</label>                    
                        <input type="text" class="form-control" name="TiTipo" id="TiTipo" value="<%= user.TiTipo %>" required tabindex="1" disabled>
                        <label for="TiAsunto" class="form-label">Asunto</label>                    
                        <input type="text" name="TiAsunto" id="TiAsunto" required class="form-control" value="<%= user.TiAsunto %>" disabled>
                        <label for="TiObeservaciones" class="form-label">Observaciones</label>
                         <textarea id="content" name="TiObservaciones" class="form-control pb-5 "><%= user.TiObeservaciones %></textarea>
                    
                </div>                      
                    <label for="TiEstado" class="form-label">Estado</label>
                        <select name="TiEstado" id="TiEstado" class="form-select">
                        <option <%= user.TiEstado=='Activo' ? "selected" : '' %>  value="Activo" >Activo</option>
                        <option <%= user.TiEstado=='En Proceso' ? "selected" : '' %>value="En Proceso" >En Proceso</option>
                        <option <%= user.TiEstado=='Finalizado' ? "selected" : '' %>value="Finalizado" >Finalizado</option>
                        </select>
                    </div>
       
                        <div style="display: inline;">
                         
                                <a href="/" class="btn "><i class='bx bxs-arrow-from-right bx-md'></i></a> 
                       
                            <input type="reset" value="Reset" class="btn btn-danger"> 
                            <input type="submit" value="Save" class="btn btn-primary">             
                         </div>
           
                </form>
           
   </div>


</div>

<%} %>

<% }else{ %>
  <div class="login-form">
    <p><strong><%= name%></strong></p>
    <a href="/login" class="btn btn-outline-info">Ir al LOGIN</a>
  </div>
<%} %>






<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<% if (typeof alert != "undefined") { %>
   <script>
      Swal.fire({
         icon: '<%= alertIcon %>',
        title: '<%= alertTitle%>',
         text: '<%= alertMessage%>',
         timer: <%= timer%>,
        showConfirmButton: <%= showConfirmButton%>, 
        }).then(()=>{
            window.location= '/<%= ruta%>'
        })
   </script>
  <% } %>
  </body>
</html>